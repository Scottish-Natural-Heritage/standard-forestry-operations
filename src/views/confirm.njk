{% extends "_base.njk" %}

{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}

{% block content %}

{% if model.declarationError %}
    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: [
        {
          text: "You must confirm that you have provided up to date information and agree with the privacy policy.",
          href: "#declaration-error"
        }
      ]
    }) }}
  {% endif %}

  <form method="post">
    <h1 class="govuk-heading-xl">
      Check your answers before sending your application
    </h1>

    <h2 class="govuk-heading-m">
      Licence Holder details
    </h2>

    {{ govukSummaryList({
      rows: [
        {
          key: {
            text: "Name"
          },
          value: {
            text: model.fullName
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/details#full-name",
                text: "Change",
                visuallyHiddenText: "name"
              }
            ]
          }
        },
        {
          key: {
            text: "Company or Organisation"
          },
          value: {
            text: model.companyOrganisation
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/details#company-organisation",
                text: "Change",
                visuallyHiddenText: "company or organisation"
              }
            ]
          }
        },
        {
          key: {
            text: "Email address"
          },
          value: {
            text: model.emailAddress
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/details#email-address",
                text: "Change",
                visuallyHiddenText: "email address"
              }
            ]
          }
        },
        {
          key: {
            text: "Phone Number"
          },
          value: {
            text: model.phoneNumber
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/details#phone-number",
                text: "Change",
                visuallyHiddenText: "contact details"
              }
            ]
          },
          classes: "naturescot-summary-list__condensed-first-row"
        },
        {
          key: {
            text: "Address"
          },
          value: {
            text: model.addressLine1
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/details#address-line-1",
                text: "Change",
                visuallyHiddenText: "contact information"
              }
            ]
          },
          classes: "naturescot-summary-list__condensed-first-row"
        },
        {
          key: {
            text: ""
          },
          value: {
            text: model.addressLine2
          },
          classes: "naturescot-summary-list__condensed-row"
        },
        {
          key: {
            text: ""
          },
          value: {
            text: model.addressTown
          },
          classes: "naturescot-summary-list__condensed-row"
        },
        {
          key: {
            text: ""
          },
          value: {
            text: model.addressCounty
          },
          classes: "naturescot-summary-list__condensed-row"
        },
        {
          key: {
            text: ""
          },
          value: {
            text: model.addressPostcode
          },
          classes: "naturescot-summary-list__condensed-last-row"
        },
        {
          key: {
            text: "Criminal Convictions"
          },
          value: {
            text: "I have not been convicted of a wildlife crime." if model.conviction === false
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/conviction#conviction",
                text: "Change",
                visuallyHiddenText: "convictions"
              }
            ]
          }
        }
      ]
    }) }}

    <h2 class="govuk-heading-m">
      Site details
    </h2>

    {{ govukSummaryList({
      rows: [
        {
          key: {
            text: "Setts"
          },
          value: {
            html: model.displaySetts
          },
          actions: {
            items: [
              {
                href: pathPrefix + "/site-location#sett-details",
                text: "Change",
                visuallyHiddenText: "setts"
              }
            ]
          }
        }
      ]
    }) }}

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">

        <h2 class="govuk-heading-m">
          Declaration
        </h2>

        <h3 class="govuk-heading-s">
          I confirm that:
        </h3>
        <ul class="govuk-list govuk-list--bullet">
          <li>The information I've provided is up to date and correct</li>
          <li>I agree with the
              <a class="govuk-link" rel="noreferrer noopener" target="_blank" href="https://www.nature.scot/privacy-policy">
                privacy policy&nbsp;(opens in new tab)</a>
               of this service
          </li>
        </ul>
      </div>
    </div>
    {{ govukCheckboxes({
    idPrefix: "declaration",
    name: "declaration",
    fieldset: {
      legend: {
        text: "Yes, I confirm",
        classes: "govuk-fieldset__legend--s"
      }
    },
    errorMessage: {
        text: "You must confirm that the information you have submitted is correct and that you agree with the privacy policy."
      } if model.declarationError,
      items: [
        {
          value: "yes",
          text: "The information i have submitted is correct and I agree with the privacy policy.",
          checked: model.declaration === true
        }
    ]
    }) }}
    {{ govukButton({
      text: "Accept and send",
      classes: "naturescot-forward-button"
    }) }}

  </form>
{% endblock %}
